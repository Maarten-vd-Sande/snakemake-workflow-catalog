<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
    integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.18.1/dist/bootstrap-table.min.css">

  <style>
    #content {
      margin-top: 2em;
      margin-left: auto;
      margin-right: auto;
      width: 90%;
    }

    #logo {
      height: 2em;
      vertical-align: center;
    }

    pre#check-msg {
      overflow: auto;
      max-height: 80vh;
    }
  </style>

  <title>Snakemake workflow catalog</title>
</head>

<body>

  <!-- Image and text -->
  <!-- Image and text -->
  <nav class="navbar navbar-light bg-light">
    <a class="navbar-brand" href="#">
      <img src="logo-snake.svg" id="logo" /> Snakemake workflow catalog <small>- a comprehensive catalog of public, standards compliant Snakemake workflows on github</small>
    </a>
  </nav>

  {% macro check_badge(check, msg) -%}
  <a href="#" data-msg="{{ msg }}" data-title="{{ check }} errors" data-toggle="modal" data-target="#detail-popup">
    <img src="https://img.shields.io/badge/{{ check }}-{{ 'passed' if msg is none else 'failed' }}-{{ 'green' if msg is none else 'red' }}" />
  </a>
  {%- endmacro %}

  <div id="content">
    <table id="repos" data-toggle="table" data-pagination="true" data-search="true" data-pagination="true">
      <thead>
        <tr>
          <th data-searchable="true" data-sortable="true">Workflow</th>
          <th data-searchable="true">Description</th>
          <th data-searchable="true">Topics</th>
          <th>QC</td>
          <th data-sortable="true">Stars</th>
          <th data-sortable="true">Watchers</th>
        </tr>
      </thead>
      <tbody>
        {% for repo in repos %}
        <tr>
          <td><a href="https://github.com/{{ repo.full_name }}">{{ repo.full_name }}</a></td>
          <td>{{ repo.description }}</td>
          <td>{{ repo.get_topics()|join(", ") }}</td>
          <td>
            <img src="https://img.shields.io/github/license/{{ repo.full_name }}" /><br />
            <a href="https://github.com/{{ repo.full_name }}/commits"><img src="https://img.shields.io/github/last-commit/{{ repo.full_name }}" /></a><br />
            {{ check_badge("linting", repo.linting) }}<br />
            {{ check_badge("formatting", repo.formatting) }}
          </td>
          <td><a href="https://github.com/{{ repo.full_name }}/stargazers">{{ repo.stargazers_count }}</a></td>
          <td><a href="https://github.com/{{ repo.full_name }}/watchers">{{ repo.subscribers_count }}</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <hr />

  <div class="footer">
    <p><small><a href="https://github.com/snakemake">&copy; 2020 The Snakemake team</a></small></p>
    <p><small>This catalog is generated automatically by querying Github APIs; the Snakemake team is not responsible for the linked workflows.</small></p>
  </div>

  <div class="modal fade" tabindex="-1" role="dialog" id="detail-popup">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Modal title</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <pre id="check-msg"></pre>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
    integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/bootstrap-table@1.18.1/dist/bootstrap-table.min.js"></script>

  <script>
    $('#detail-popup').on('show.bs.modal', function (event) {
      var source = $(event.relatedTarget) // item that triggered the modal
      var msg = source.data('msg')
      var title = source.data('title')
      var modal = $(this)
      modal.find('.modal-title').text(title)
      modal.find('.modal-body pre').text(msg)
    })
  </script>
</body>

</html>